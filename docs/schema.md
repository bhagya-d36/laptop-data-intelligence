# Schema Documentation

## Dataset Overview

The Laptop Assistant platform uses an integrated dataset (`laptop_info_cleaned.csv`) that combines data from multiple sources:

- **Canonical Specifications**: Extracted from official PDF datasheets
- **Marketplace Data**: Scraped from HP and other laptop stores
- **Review Data**: Customer reviews and ratings (generated when missing)
- **Pricing Data**: Current prices, discounts, and availability

## Core Schema

### Primary Data Structure

The main dataset contains the following key fields organized into logical groups:

```
laptop_info_cleaned.csv
├── Core Information
├── Pricing & Availability
├── Technical Specifications
├── Reviews & Feedback
└── Metadata
```

## Field Definitions

### Core Information

| Field | Type | Description | Example |
|-------|------|-------------|---------|
| `Brand` | String | Primary laptop brand | "HP", "Lenovo" |
| `Model` | String | Specific model name | "Chromebook Clamshell", "ThinkPad E14" |

### Pricing & Availability

| Field | Type | Description | Example |
|-------|------|-------------|---------|
| `Price Details` | String | Current price | `"$272.00"`, `"$3,515.00"` |
| `Availability` | String | Stock status | `"Available"`, `"Available Soon"` |
| `Promos / Offers` | String | Active promotions | `"3% back in HP Rewards"` |

### Technical Specifications

| Field | Type | Description | Example |
|-------|------|-------------|---------|
| `Processor` | String | CPU specifications | "Intel Core i5", "AMD Ryzen" |
| `Operating System` | String | OS information | "Windows 11", "Chrome OS" |
| `Graphics` | String | GPU details | "Integrated", "Dedicated" |
| `Chipset` | String | Chipset information | "Intel", "AMD" |
| `Memory (RAM)` | String | RAM specifications | "8GB DDR4", "16GB DDR4" |
| `Storage` | String | Storage type and capacity | "256GB SSD", "512GB SSD" |
| `Display` | String | Screen specifications | "14\" FHD", "15.6\" FHD" |
| `External Monitor Support` | String | External display capabilities | "Up to 2 external monitors" |
| `Audio` | String | Audio system details | "Stereo speakers" |
| `Camera` | String | Webcam specifications | "720p HD camera" |
| `Input Devices` | String | Keyboard and pointing device info | "Standard keyboard, touchpad" |
| `Dimensions & Weight` | String | Physical specifications | "323 x 217 x 19 mm, 1.5 kg" |
| `Case / Chassis` | String | Build materials and design | "Plastic chassis" |
| `Ports` | String | Available ports and connectivity | "USB-C, USB-A, HDMI" |
| `Card Reader` | String | Memory card reader | "microSD card reader" |
| `Wireless Networking` | String | WiFi and Bluetooth specs | "Wi-Fi 6, Bluetooth 5.0" |
| `Wired Networking` | String | Ethernet capabilities | "Gigabit Ethernet" |
| `Mobile Broadband` | String | Cellular connectivity | "Optional 4G LTE" |
| `Docking` | String | Docking station support | "USB-C docking support" |
| `Battery` | String | Battery specifications | "Up to 8 hours" |
| `Power Adapter` | String | Charger details | "45W USB-C adapter" |
| `Biometric Security` | String | Fingerprint reader info | "Fingerprint reader" |
| `General Security` | String | Security features | "TPM 2.0" |
| `Software & Management` | String | Pre-installed software | "Windows 11, Office 365" |
| `Warranty` | String | Warranty information | "1-year warranty" |
| `Environmental & Durability Standards` | String | Certifications and durability | "ENERGY STAR certified" |

### Reviews & Feedback

| Field | Type | Description | Example |
|-------|------|-------------|---------|
| `Review Details` | String | Review information | `"-"` (often missing, generated by system) |
| `Q&A / FAQ` | String | Common questions and answers | `"-"` (often missing) |

## Data Types and Formats

### Data Processing

The system processes and enriches the raw data:

#### Price Details Processing
- Raw format: `"$272.00"`
- Processed format: `{"Current Price": "$272.00"}`
- System generates missing pricing information

#### Availability Processing
- Raw format: `"Available"`
- Processed format: `{"Status": "Available"}`
- System adds availability tracking

#### Review Details Processing
- Raw format: `"-"` (often missing)
- Processed format: Generated based on brand reputation and price tier
- Example generated format:
```json
{
  "Overall Rating": "4.2/5 (48 reviews)",
  "AI Summary": "User rating: 4.2/5 stars based on 48 reviews. This laptop has received positive feedback from users.",
  "User Feedback": "Based on user reviews and ratings."
}
```

#### Q&A Processing
- Raw format: `"-"` (often missing)
- Processed format: Empty array `[]`
- System can generate common Q&A based on specifications

### String Fields

Most fields are stored as strings with specific formatting:

- **Prices**: `"$272.00"`, `"$3,515.00"`
- **Ratings**: `"4.2"`, `"N/A"`
- **Dimensions**: `"323 x 217 x 19 mm"`
- **Weight**: `"1.5 kg"`
- **Memory**: `"8GB DDR4"`, `"16GB DDR4"`
- **Storage**: `"256GB SSD"`, `"512GB SSD"`

## Data Relationships

### Brand-Model Hierarchy
```
Brand (HP/Lenovo)
├── Model Line (Chromebook Clamshell, ThinkPad E14)
    ├── Variants (Different configurations)
        ├── Specifications
        ├── Pricing
        ├── Reviews (Generated)
        └── Availability
```

### Cross-References

- **Brand Consistency**: Single `Brand` field
- **Model Uniqueness**: Each model has unique specifications
- **Price-Availability**: Pricing correlates with availability status
- **Review-Rating**: Review details generated based on brand and price

## Data Quality Considerations

### Required Fields
- `Brand`: Must be non-empty (e.g., "HP", "Lenovo")
- `Model`: Must be non-empty
- `Price Details`: Must contain valid price format
- `Availability`: Must be non-empty

### Optional Fields
- `Processor`: Can be empty (system generates defaults)
- `Memory (RAM)`: Can be empty (system generates defaults)
- `Storage`: Can be empty (system generates defaults)
- `Review Details`: Can be "-" (system generates realistic reviews)
- `Q&A / FAQ`: Can be "-" (system generates if needed)

### Data Validation Rules

1. **Price Validation**:
   - Price must be in format "$XXX.XX"
   - System generates realistic pricing if missing
   - Price parsing handles various formats

2. **Rating Validation**:
   - Generated ratings are between 2.0 and 5.0
   - Ratings based on brand reputation and price tier
   - AI Summary generated for all products

3. **Specification Validation**:
   - System generates realistic defaults for missing specs
   - Memory format: "XGB DDR4"
   - Storage format: "XXXGB SSD"
   - Display format: "X.X\" FHD"

## Data Processing Pipeline

### 1. Data Ingestion
```
CSV Data → Data Loading → Field Mapping → Structured Data
Missing Fields → System Generation → Realistic Defaults
```

### 2. Data Integration
```
Raw CSV → Data Cleaning → Schema Mapping → Enriched Dataset
```

### 3. Data Enrichment
```
Raw Data → AI Processing → Generated Reviews → Final Dataset
```

## API Schema Mapping

### Explore Endpoints
- `/explore/` → All fields with laptop_id
- `/explore/{id}` → Single record
- `/explore/{id}/specifications` → Technical specification fields
- `/explore/search` → Filtered subset based on query parameters
- `/explore/filter-options` → Unique values from categorical fields

### Review Endpoints
- `/reviews/` → Review Details + Core Information
- `/reviews/stats` → Aggregated statistics from Review Details
- `/reviews/volume-trends` → Volume trends data
- `/reviews/rating-trends` → Rating trends data
- `/reviews/top-themes` → Theme analysis data
- `/reviews/top-attributes` → Attribute analysis data
- `/reviews/rating-distribution` → Rating distribution
- `/reviews/brand-comparison` → Brand comparison data

### Recommendation Endpoints
- `/recommendations/constraint-based` → Scored and ranked subset based on constraints
- `/recommendations/similar/{id}` → Content-based similar laptops
- `/recommendations/trending` → Trending laptops based on ratings
- `/recommendations/budget/{price}` → Budget-based recommendations
- `/recommendations/brand/{brand}` → Brand-specific recommendations
- `/recommendations/use-case` → Use case specific recommendations

### Chat Endpoints
- `/chat/query` → Natural language queries with LLM responses
- `/chat/recommend` → AI-powered recommendations
- `/chat/compare` → Laptop comparison with AI analysis

## Database Schema (Future)

For production deployment, consider migrating to a relational database:

### Tables
```sql
-- Brands table
CREATE TABLE brands (
    id SERIAL PRIMARY KEY,
    name VARCHAR(50) UNIQUE NOT NULL
);

-- Models table
CREATE TABLE models (
    id SERIAL PRIMARY KEY,
    brand_id INTEGER REFERENCES brands(id),
    name VARCHAR(100) NOT NULL,
    created_at TIMESTAMP DEFAULT NOW()
);

-- Specifications table
CREATE TABLE specifications (
    id SERIAL PRIMARY KEY,
    model_id INTEGER REFERENCES models(id),
    processor TEXT,
    memory TEXT,
    storage TEXT,
    display TEXT,
    -- ... other spec fields
);

-- Pricing table
CREATE TABLE pricing (
    id SERIAL PRIMARY KEY,
    model_id INTEGER REFERENCES models(id),
    current_price DECIMAL(10,2),
    availability VARCHAR(50),
    promos TEXT,
    updated_at TIMESTAMP DEFAULT NOW()
);

-- Reviews table
CREATE TABLE reviews (
    id SERIAL PRIMARY KEY,
    model_id INTEGER REFERENCES models(id),
    overall_rating DECIMAL(2,1),
    review_count INTEGER,
    ai_summary TEXT,
    user_feedback TEXT,
    created_at TIMESTAMP DEFAULT NOW()
);
```

## Data Export Formats

### CSV Export
- Maintains current structure
- Preserves string fields as-is
- Compatible with Excel and other tools

### JSON Export
- Structured format
- Processed and enriched fields
- Better for API consumption

### API Response Format
- Standardized structure
- Error handling
- Consistent data formatting

## Maintenance and Updates

### Data Refresh Schedule
- **Pricing**: Daily updates
- **Availability**: Real-time updates
- **Reviews**: Generated on-demand
- **Specifications**: Monthly verification

### Data Backup Strategy
- Daily automated backups
- Version control for schema changes
- Point-in-time recovery capability

### Quality Monitoring
- Automated validation checks
- Data completeness reports
- Generated data quality metrics

## Troubleshooting

### Common Issues

1. **Data Parsing Errors**:
   - Validate data structure before processing
   - Handle malformed data gracefully
   - Log parsing errors for debugging

2. **Missing Data**:
   - System generates realistic defaults
   - Implement fallback values
   - Monitor data completeness metrics

3. **Schema Changes**:
   - Version API endpoints
   - Maintain backward compatibility
   - Document breaking changes

### Debugging Tools

- Data validation scripts
- Schema compliance checker
- Data quality dashboard
- Error logging and monitoring

This schema documentation provides a comprehensive overview of the data structure, relationships, and processing pipeline for the Laptop Assistant platform.
